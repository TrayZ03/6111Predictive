"0","# create data frames to store ROC AUC calculations for each probability threshold"
"0","roc_data <- data.frame(threshold=seq(1,0,-0.01), lr_fpr=0, knn_tpr=0)"
"0",""
"0","for (i in roc_data$threshold) {"
"0","  # subset the test result based on which predictions are over the threshold i"
"0","  lr_over_threshold <- lr_test_results[lr_test_results$.pred_Attrited.Customer >= i, ]"
"0","  knn_over_threshold <- knn_test_results[knn_test_results$.pred_Attrited.Customer >= i, ]"
"0"," "
"0","  # get the predicted negative class for each model"
"0","  lr_pred_neg <- sum(lr_over_threshold$Attrition_Flag==""Existing Customer"")"
"0","  knn_pred_neg <- sum(knn_over_threshold$Attrition_Flag==""Existing Customer"")"
"0","  "
"0","  # get the predicted positive class for each model"
"0","  lr_pred_pos <- sum(lr_over_threshold$Attrition_Flag==""Attrited Customer"")"
"0","  knn_pred_pos <- sum(knn_over_threshold$Attrition_Flag==""Attrited Customer"")"
"0","  "
"0","  # get the true positives and negatives (same for each model)"
"0","  true_neg <- sum(lr_test_results$Attrition_Flag==""Existing Customer"")"
"0","  true_pos <- sum(lr_test_results$Attrition_Flag==""Attrited Customer"")"
"0","  "
"0","  # compute false and true positive rates and store in roc_data tibble"
"0","  lr_fpr <- lr_pred_neg/true_neg"
"0","  knn_fpr <- knn_pred_neg/true_neg"
"0","  roc_data[roc_data$threshold==i, ""lr_fpr""] <- lr_fpr"
"0","  roc_data[roc_data$threshold==i, ""knn_fpr""] <- knn_fpr"
"0","  "
"0","  lr_tpr <- lr_pred_pos/true_pos"
"0","  knn_tpr <- knn_pred_pos/true_pos"
"0","  roc_data[roc_data$threshold==i, ""lr_tpr""] <- lr_tpr"
"0","  roc_data[roc_data$threshold==i, ""knn_tpr""] <- knn_tpr"
"0","  "
"0","}"
