"0","calibration_data <- data.frame(bin_midpoint=seq(0.05,0.95,0.1),"
"0","                               observed_event_percentage=0)"
"0","for (i in seq(0.05,0.95,0.1)) {"
"0","  "
"0","  in_interval <- knn_test_results[knn_test_results$.pred_Attrited.Customer >= (i-0.05) & knn_test_results$.pred_Attrited.Customer <= (i+0.05), ]"
"0","  oep <- nrow(in_interval[in_interval$.pred_Attrited.Customer==1, ])/nrow(in_interval)"
"0","  calibration_data[calibration_data$bin_midpoint==i, ""observed_event_percentage""] <- oep"
"0","  "
"0","}"
"0",""
"0","ggplot(data = calibration_data, aes(x = bin_midpoint, y = observed_event_percentage)) +"
"0","  geom_line(linewidth = 1) +"
"0","  geom_abline(intercept = 0, slope = 1, lty = 2) +"
"0","  geom_point(size = 2) +"
"0","  geom_text(aes(label = bin_midpoint), hjust = 0.75, vjust = -0.5)"
