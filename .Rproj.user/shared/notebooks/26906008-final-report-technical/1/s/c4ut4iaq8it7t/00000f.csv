"0","bin_feat <- c('Card_Category', 'Months_on_book',  'Months_Inactive_12_mon', 'Total_Revolving_Bal', 'Avg_Utilization_Ratio', 'Total_Trans_Amt', 'Total_Trans_Ct', 'Credit_Use_Ratio')"
"0","model_data <- model_data %>% "
"0","  mutate(Card_Category = case_when("
"0","         Card_Category == ""Blue"" ~ ""Blue"","
"0","         TRUE ~ ""Silver, Gold, Platinum"""
"0","         ),"
"0","         Months_on_book = case_when( # bins roughly correspond to years"
"0","         Months_on_book >= min(Months_on_book) & Months_on_book < 12 ~ 1, # use lower ends of intervals"
"0","         Months_on_book >= 12 & Months_on_book < 24 ~ 2,"
"0","         Months_on_book >= 24 & Months_on_book < 36 ~ 3,"
"0","         Months_on_book == 36 ~ 4, # special bin for huge number of customers with 36 months on book"
"0","         Months_on_book >= 37 & Months_on_book < 48 ~ 5,"
"0","         Months_on_book >= 48 & Months_on_book <= max(Months_on_book) ~ 6 # max is 6"
"0","         ),"
"0","         Months_Inactive_12_mon = case_when("
"0","         Months_Inactive_12_mon <= 1 ~ 1, # min is 0"
"0","         Months_Inactive_12_mon >= 4 ~ 4, # maximum is 6"
"0","         TRUE ~ Months_Inactive_12_mon"
"0","         ),"
"0","         Total_Revolving_Bal = case_when("
"0","         Total_Revolving_Bal == min(Total_Revolving_Bal) ~ 1, # min == 0 in this case, very large number of observations"
"0","         Total_Revolving_Bal > min(Total_Revolving_Bal) & Total_Revolving_Bal <= 500 ~ 2, # upper interval ends"
"0","         Total_Revolving_Bal > 500 & Total_Revolving_Bal <= 1000 ~ 3,"
"0","         Total_Revolving_Bal > 1000 & Total_Revolving_Bal <= 1500 ~ 4,"
"0","         Total_Revolving_Bal > 1500 & Total_Revolving_Bal <= 2000 ~ 5,"
"0","         Total_Revolving_Bal > 2000 & Total_Revolving_Bal <= max(Total_Revolving_Bal) ~ 6 # max is 2517"
"0","         ),"
"0","         Avg_Utilization_Ratio = case_when("
"0","         Avg_Utilization_Ratio == min(Avg_Utilization_Ratio) ~ 1, # min == 0, very large number of observations"
"0","         Avg_Utilization_Ratio > min(Avg_Utilization_Ratio) & Avg_Utilization_Ratio <= 0.2 ~ 2, # upper interval ends "
"0","         Avg_Utilization_Ratio > 0.2 & Avg_Utilization_Ratio <= 0.4 ~ 3,"
"0","         Avg_Utilization_Ratio > 0.4 & Avg_Utilization_Ratio <= 0.6 ~ 4,"
"0","         Avg_Utilization_Ratio > 0.6 & Avg_Utilization_Ratio <= 0.8 ~ 5,"
"0","         Avg_Utilization_Ratio > 0.8 & Avg_Utilization_Ratio <= max(Avg_Utilization_Ratio) ~ 6 # max is approx 0.998"
"0","         ),"
"0","         Total_Trans_Amt = case_when( # try to capture 4 modes in bins"
"0","         Total_Trans_Amt >= min(Total_Trans_Amt) & Total_Trans_Amt <= 3000 ~ 1, # upper interval ends"
"0","         Total_Trans_Amt > 3000 & Total_Trans_Amt <= 5000 ~ 2,"
"0","         Total_Trans_Amt > 5000 & Total_Trans_Amt <= 10000 ~ 3,"
"0","         Total_Trans_Amt > 10000 & Total_Trans_Amt <= max(Total_Trans_Amt) ~ 4 # max is 18484"
"0","         ),"
"0","         Total_Trans_Ct = case_when( # try to capture 3 modes in bins"
"0","         Total_Trans_Ct >= min(Total_Trans_Ct) & Total_Trans_Ct <= 50 ~ 1, # upper interval ends"
"0","         Total_Trans_Ct > 50 & Total_Trans_Ct <= 80 ~ 2,"
"0","         Total_Trans_Ct > 80 & Total_Trans_Ct <= max(Total_Trans_Ct) ~ 3 # max is 139"
"0","         ),"
"0","         Credit_Use_Ratio = case_when("
"0","         Credit_Use_Ratio == min(Credit_Use_Ratio) ~ 1, # min is zero in this case, very large number of observations"
"0","         Credit_Use_Ratio > min(Credit_Use_Ratio) & Credit_Use_Ratio <= 0.2 ~ 2, # use upper ends of intervals"
"0","         Credit_Use_Ratio > 0.2 & Credit_Use_Ratio <= 0.4 ~ 3,"
"0","         Credit_Use_Ratio > 0.4 & Credit_Use_Ratio <= 0.6 ~ 4,"
"0","         Credit_Use_Ratio > 0.6 & Credit_Use_Ratio <= 0.8 ~ 5,"
"0","         Credit_Use_Ratio > 0.8 & Credit_Use_Ratio <= max(Credit_Use_Ratio) ~ 6 # max is approx 0.998"
"0","         ),"
"0","         "
"0","  )"
